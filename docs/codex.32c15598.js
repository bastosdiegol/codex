var e=globalThis,t={},o={},n=e.parcelRequire94c2;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},e.parcelRequire94c2=n);var r=n.register;r("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>o,set:e=>o=e,enumerable:!0,configurable:!0});var o,n=new Map;o=function(e,t){for(var o=0;o<t.length-1;o+=2)n.set(t[o],{baseUrl:e,path:t[o+1]})}}),r("lKpmK",function(e,t){e.exports=new URL("service-worker.ae2116a8.js",import.meta.url).toString()}),n("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["aVCRy","codex.32c15598.js","3o9Aw","service-worker.ae2116a8.js"]'));var i=n("8XP4m");const l=new URL(n("lKpmK"));"serviceWorker"in navigator&&navigator.serviceWorker.register(l.href,{scope:"/codex/"}).then(()=>console.log("Service Worker Registered for scope:",l.href,"with","file:///assets/scripts/app.js")).catch(e=>console.error("Service Worker Error:",e)),document.addEventListener("DOMContentLoaded",async()=>{await new Promise((e,t)=>{(0,i.auth).onAuthStateChanged(o=>{o?e(o):(console.log("User is not authenticated"),window.location="index.html",t("User not authenticated"))})});let e=[],t=document.getElementById("book-list"),o=document.getElementById("book-form"),n=document.getElementById("book-management-form"),r=document.getElementById("side-menu"),l=document.getElementById("menu-overlay"),a=document.getElementById("burger-menu"),s=document.getElementById("close-menu"),d=document.getElementById("add-book-link"),c=document.getElementById("sign-out"),u=document.getElementById("close-form"),m=document.getElementById("delete-book"),g=document.getElementById("book-id");function v(){r.classList.remove("open"),l.classList.remove("show"),k(!1)}function p(){t.innerHTML="",e.forEach(e=>{var o;let n=document.createElement("article");if(n.id=e.id,n.classList.add("book-card"),n.setAttribute("aria-labelledby",`book-title-${e.id}`),n.tabIndex=0,""!==e.cover){let t=document.createElement("div");t.classList.add("book-img");let o=document.createElement("img");o.src=e.cover,o.alt=`${e.title} Book Cover`,t.appendChild(o),n.appendChild(t)}let r=document.createElement("div");r.classList.add("book-info");let i=document.createElement("h2");i.id=`book-title-${e.id}`,i.textContent=e.title;let l=document.createElement("p");l.innerHTML=`<strong>Author:</strong> ${e.author}`;let a=document.createElement("p");a.innerHTML=`<strong>Genre:</strong> ${e.genre.join(", ")}`;let s=document.createElement("p");s.innerHTML=`<strong>Status:</strong> ${e.status}`;let d=document.createElement("p");d.innerHTML=`<strong>Progress:</strong> ${e.progress}%`;let c=document.createElement("span");c.classList.add("book-rating"),c.setAttribute("aria-label",`Rating: ${e.rating} out of 5 stars`),c.innerHTML=(o=e.rating,"&starf;".repeat(o)+"&star;".repeat(5-o)),r.appendChild(i),r.appendChild(l),r.appendChild(a),r.appendChild(s),r.appendChild(d),n.appendChild(r),n.appendChild(c),t.appendChild(n)})}k(!1),a.addEventListener("click",function(){r.classList.add("open"),l.classList.add("show"),k(!0),function(){let e=r.querySelectorAll("a"),t=r.querySelector("#close-menu"),o=e[0],n=e[e.length-1];r.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===o?(t.focus(),e.preventDefault()):document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n?(t.focus(),e.preventDefault()):document.activeElement===t&&(o.focus(),e.preventDefault()))})}()}),s.addEventListener("click",v),l.addEventListener("click",v),await (0,i.getBooksFromFirestore)(e);let h=null;function E(e){e&&(e.classList.add("highlight"),e.focus(),e.scrollIntoView({behavior:"smooth"}),setTimeout(()=>e.classList.remove("highlight"),1e3))}function f(e=null){let n=document.getElementById("book-cover"),r=document.getElementById("book-id"),i=document.getElementById("book-title"),l=document.getElementById("book-author"),a=document.getElementById("book-genre"),s=document.getElementById("book-progress"),d=document.getElementById("book-status"),c=document.getElementById("book-rating");e?(n.value=e.cover,r.value=e.id,i.value=e.title,l.value=e.author,a.value=e.genre,s.value=e.progress,d.value=e.status,c.value=e.rating,m.style.display="inline-block"):(n.value="",r.value="",i.value="",l.value="",a.value="",s.value="",d.value="Not Read",c.value="",m.style.display="none"),o.classList.add("show"),t.classList.add("hide")}function k(e){let t=r.querySelectorAll("nav a"),o=r.querySelector("#close-menu");t.forEach(t=>{e?t.setAttribute("tabindex","0"):t.setAttribute("tabindex","-1")}),e?o.setAttribute("tabindex","0"):o.setAttribute("tabindex","-1")}function b(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}t.addEventListener("keydown",o=>{if("ArrowDown"===o.key){if(o.preventDefault(),null===h)h=t.querySelector(".book-card");else{let e=h.nextElementSibling;e&&e.classList.contains("book-card")&&(h=e)}E(h)}else if("ArrowUp"===o.key){if(o.preventDefault(),null===h)h=t.querySelector(".book-card");else{let e=h.previousElementSibling;e&&e.classList.contains("book-card")&&(h=e)}E(h)}else if(("Enter"===o.key||" "===o.key)&&(o.preventDefault(),h)){let t=h.id;f(e.find(e=>e.id==t))}}),t.addEventListener("focusin",e=>{e.target&&e.target.classList.contains("book-card")&&(h=e.target)}),t.addEventListener("click",t=>{let o=t.target.closest(".book-card");if(o){let t=o.id;f(e.find(e=>e.id==t))}}),n.addEventListener("submit",async n=>{let r;n.preventDefault();let l=n.target;if(!l.checkValidity()){l.reportValidity();return}let a=b(document.getElementById("book-cover").value.trim()),s=b(document.getElementById("book-title").value.trim()),d=b(document.getElementById("book-author").value.trim()),c=document.getElementById("book-genre").value.split(",").map(e=>b(e.trim())),u=b(document.getElementById("book-progress").value.trim()),m=b(document.getElementById("book-status").value.trim()),v=b(document.getElementById("book-rating").value.trim());if(""!==g.value){let t=e.findIndex(e=>e.id==g.value);if(-1!==t){e[t]={id:g.value,cover:a,title:s,author:d,genre:c,progress:u,status:m,rating:v};try{await (0,i.updateBookInFirestore)(e[t])}catch(e){console.error("Error updating book in Firestore: ",e)}r=e[t]}}else{let t={cover:a,title:s,author:d,genre:c,progress:u,status:m,rating:v};e.push(t);try{e[e.length-1].id=await (0,i.addBookToFirestore)(t)}catch(e){console.error("Error adding book to Firestore: ",e)}r=t}p(),o.classList.remove("show"),t.classList.remove("hide");let h=document.getElementById(r.id);h&&(h.classList.add("highlight"),h.focus(),h.scrollIntoView({behavior:"smooth"}),setTimeout(()=>h.classList.remove("highlight"),1500))}),u.addEventListener("click",()=>{o.classList.remove("show"),t.classList.remove("hide")}),m.addEventListener("click",function(){if(""!==g.value&&confirm(`Are you sure you want to delete the book "${document.getElementById("book-title").value}" entry?`)){let n=e.findIndex(e=>e.id==g.value);if(-1!==n){try{(0,i.removeBookFromFirestore)(g.value)}catch(e){console.error("Error removing book from Firestore: ",e)}e.splice(n,1)}p(),o.classList.remove("show"),t.classList.remove("hide")}}),d.addEventListener("click",e=>{e.preventDefault(),f(),v()}),c.addEventListener("click",async e=>{e.preventDefault();try{await (0,i.auth).signOut(),window.location="index.html"}catch(e){console.error("Error signing out: ",e)}}),p()});
//# sourceMappingURL=codex.32c15598.js.map
