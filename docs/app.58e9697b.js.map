{"mappings":"A,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,O,c,C,E,O,C,W,C,I,I,E,I,A,G,E,E,W,C,E,a,C,C,GCEA,IAgBA,EAhBI,EAAU,IAAI,IAgBlB,EAfA,SAAkB,CAAO,CAAE,CAAQ,EACjC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAS,MAAM,CAAG,EAAG,GAAK,EAC5C,EAAQ,GAAG,CAAC,CAAQ,CAAC,EAAE,CAAE,CACvB,QAAS,EACT,KAAM,CAAQ,CAAC,EAAI,EAAE,AACvB,EAEJ,C,G,E,Q,S,C,C,C,ECVA,EAAA,OAAA,CAAiB,IAAA,IAAoB,8CAAA,YAAA,GAAA,EAA+C,QAAQ,E,GCA5F,AAAA,EAAA,SAAA,QAAA,CAA8C,IAAA,IAAoB,GAAA,YAAA,GAAA,EAAI,QAAQ,GAAG,KAAK,KAAK,CAAC,uG,I,E,E,S,E,E,S,E,E,SCU5F,MAAM,EAAN,IAAA,IAAA,EAAA,UAgRA,SAAS,EAAa,CAAK,EACzB,IAAM,EAAW,SAAS,cAAc,CAAC,YACzC,CAAA,EAAS,SAAS,CAAG,GAErB,EAAM,OAAO,CAAC,AAAC,QA6DI,EA3DjB,IAAM,EAAW,SAAS,aAAa,CAAC,WAOxC,GANA,EAAS,EAAE,CAAG,EAAK,EAAE,CACrB,EAAS,SAAS,CAAC,GAAG,CAAC,aACvB,EAAS,YAAY,CAAC,kBAAmB,CAAC,WAAW,EAAE,EAAK,EAAE,CAAA,CAAE,EAChE,EAAS,QAAQ,CAAG,EAGhB,AAAe,KAAf,EAAK,KAAK,CAAS,CACrB,IAAM,EAAa,SAAS,aAAa,CAAC,OAC1C,EAAW,SAAS,CAAC,GAAG,CAAC,YACzB,IAAM,EAAU,SAAS,aAAa,CAAC,MACvC,CAAA,EAAQ,GAAG,CAAG,EAAK,KAAK,CACxB,EAAQ,GAAG,CAAG,CAAA,EAAG,EA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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-90275e0fdeed4b22.js","node_modules/@parcel/runtime-js/lib/runtime-ebde343c9456a2cd.js","assets/scripts/app.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"27Lyk\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", () => $18c11f3350a906ea$export$6503ec6e8aabbaf, (v) => $18c11f3350a906ea$export$6503ec6e8aabbaf = v);\nvar $18c11f3350a906ea$export$6503ec6e8aabbaf;\nvar $18c11f3350a906ea$export$f7ad0328861e2f03;\n\"use strict\";\nvar $18c11f3350a906ea$var$mapping = new Map();\nfunction $18c11f3350a906ea$var$register(baseUrl, manifest) {\n    for(var i = 0; i < manifest.length - 1; i += 2)$18c11f3350a906ea$var$mapping.set(manifest[i], {\n        baseUrl: baseUrl,\n        path: manifest[i + 1]\n    });\n}\nfunction $18c11f3350a906ea$var$resolve(id) {\n    var resolved = $18c11f3350a906ea$var$mapping.get(id);\n    if (resolved == null) throw new Error('Could not resolve bundle with id ' + id);\n    return new URL(resolved.path, resolved.baseUrl).toString();\n}\n$18c11f3350a906ea$export$6503ec6e8aabbaf = $18c11f3350a906ea$var$register;\n$18c11f3350a906ea$export$f7ad0328861e2f03 = $18c11f3350a906ea$var$resolve;\n\n});\n\nparcelRegister(\"lKpmK\", function(module, exports) {\nmodule.exports = new URL(\"service-worker.48cfd86f.js\", import.meta.url).toString();\n\n});\n\nvar $142ccf9705eae195$exports = {};\n\n(parcelRequire(\"27Lyk\")).register(new URL(\"\", import.meta.url).toString(), JSON.parse(\"[\\\"aVCRy\\\",\\\"app.58e9697b.js\\\",\\\"3o9Aw\\\",\\\"service-worker.48cfd86f.js\\\"]\"));\n\n\nvar $8XP4m = parcelRequire(\"8XP4m\");\n\nvar $1zsFO = parcelRequire(\"1zsFO\");\n\nvar $hRA4F = parcelRequire(\"hRA4F\");\n\nconst $67fddd50f369a05c$var$sw = new URL((parcelRequire(\"lKpmK\")));\nif (\"serviceWorker\" in navigator) {\n    const s = navigator.serviceWorker;\n    s.register($67fddd50f369a05c$var$sw.href, {\n        scope: \"/codex/\"\n    }).then(()=>console.log(\"Service Worker Registered for scope:\", $67fddd50f369a05c$var$sw.href, \"with\", \"file:///assets/scripts/app.js\")).catch((err)=>console.error(\"Service Worker Error:\", err));\n}\n// Load Listeners After DOM Content is Loaded\ndocument.addEventListener(\"DOMContentLoaded\", async ()=>{\n    const books = [];\n    let order = \"asc\";\n    const bookList = document.getElementById(\"book-list\");\n    const bookFormSection = document.getElementById(\"book-form\");\n    const bookForm = document.getElementById(\"book-management-form\");\n    const closeBookForm = document.getElementById(\"close-form\");\n    const deleteBook = document.getElementById(\"delete-book\");\n    const bookId = document.getElementById(\"book-id\");\n    // Check if user is authenticated\n    await $67fddd50f369a05c$var$isUserAuthenticated();\n    // Load Books for the first time\n    await (0, $8XP4m.getBooksFromFirestore)(books);\n    // Keyboard Navigation Functionality\n    let currentFocus = null;\n    // Keyboard navigation using arrow keys for book cards\n    bookList.addEventListener(\"keydown\", (event)=>{\n        if (event.key === \"ArrowDown\") {\n            event.preventDefault();\n            if (currentFocus === null) currentFocus = bookList.querySelector(\".book-card\");\n            else {\n                const nextCard = currentFocus.nextElementSibling;\n                if (nextCard && nextCard.classList.contains(\"book-card\")) currentFocus = nextCard;\n            }\n            $67fddd50f369a05c$var$focusOnBookCard(currentFocus);\n        } else if (event.key === \"ArrowUp\") {\n            event.preventDefault();\n            if (currentFocus === null) currentFocus = bookList.querySelector(\".book-card\");\n            else {\n                const prevCard = currentFocus.previousElementSibling;\n                if (prevCard && prevCard.classList.contains(\"book-card\")) currentFocus = prevCard;\n            }\n            $67fddd50f369a05c$var$focusOnBookCard(currentFocus);\n        } else if (event.key === \"Enter\" || event.key === \" \") {\n            // Trigger opening the form for the focused book card\n            event.preventDefault();\n            if (currentFocus) {\n                const bookId = currentFocus.id;\n                const book = books.find((b)=>b.id == bookId);\n                (0, $1zsFO.openBookForm)(book);\n            }\n        }\n    });\n    // Keyboard navigation using tab keys focus\n    bookList.addEventListener(\"focusin\", (event)=>{\n        if (event.target && event.target.classList.contains(\"book-card\")) currentFocus = event.target;\n    });\n    // Book Form Listener\n    bookList.addEventListener(\"click\", (event)=>{\n        const bookCard = event.target.closest(\".book-card\");\n        if (bookCard) {\n            const bookId = bookCard.id;\n            const book = books.find((b)=>b.id == bookId);\n            (0, $1zsFO.openBookForm)(book);\n        }\n    });\n    // Save Book Button Listener\n    bookForm.addEventListener(\"submit\", async (event)=>{\n        event.preventDefault();\n        const form = event.target;\n        if (!form.checkValidity()) {\n            form.reportValidity();\n            return;\n        }\n        const cover = (0, $1zsFO.sanitizeInput)(document.getElementById(\"book-cover\").value.trim());\n        const title = (0, $1zsFO.sanitizeInput)(document.getElementById(\"book-title\").value.trim());\n        const author = (0, $1zsFO.sanitizeInput)(document.getElementById(\"book-author\").value.trim());\n        const genre = document.getElementById(\"book-genre\").value.split(\",\").map((item)=>(0, $1zsFO.sanitizeInput)(item.trim()));\n        const progress = (0, $1zsFO.sanitizeInput)(document.getElementById(\"book-progress\").value.trim());\n        const status = (0, $1zsFO.sanitizeInput)(document.getElementById(\"book-status\").value.trim());\n        const rating = (0, $1zsFO.sanitizeInput)(document.getElementById(\"book-rating\").value.trim());\n        let savedBook;\n        if (bookId.value !== \"\") {\n            const bookIndex = books.findIndex((book)=>book.id == bookId.value);\n            if (bookIndex !== -1) {\n                books[bookIndex] = {\n                    id: bookId.value,\n                    cover: cover,\n                    title: title,\n                    author: author,\n                    genre: genre,\n                    progress: progress,\n                    status: status,\n                    rating: rating\n                };\n                try {\n                    await (0, $8XP4m.updateBookInFirestore)(books[bookIndex]);\n                } catch (error) {\n                    console.error(\"Error updating book in Firestore: \", error);\n                }\n                savedBook = books[bookIndex];\n            }\n        } else {\n            const newBook = {\n                cover: cover,\n                title: title,\n                author: author,\n                genre: genre,\n                progress: progress,\n                status: status,\n                rating: rating\n            };\n            books.push(newBook);\n            try {\n                books[books.length - 1].id = await (0, $8XP4m.addBookToFirestore)(newBook);\n            } catch (error) {\n                console.error(\"Error adding book to Firestore: \", error);\n            }\n            savedBook = newBook;\n        }\n        $67fddd50f369a05c$var$displayBooks(books);\n        bookFormSection.classList.remove(\"show\");\n        bookList.classList.remove(\"hide\");\n        const savedBookCard = document.getElementById(savedBook.id);\n        if (savedBookCard) {\n            savedBookCard.classList.add(\"highlight\");\n            savedBookCard.focus();\n            savedBookCard.scrollIntoView({\n                behavior: \"smooth\"\n            });\n            setTimeout(()=>savedBookCard.classList.remove(\"highlight\"), 1500);\n        }\n    });\n    // Close Form Button Listener\n    closeBookForm.addEventListener(\"click\", ()=>{\n        bookFormSection.classList.remove(\"show\");\n        bookList.classList.remove(\"hide\");\n    });\n    // Delete Book Button Listener\n    deleteBook.addEventListener(\"click\", function() {\n        if (bookId.value === \"\") return;\n        if (confirm(`Are you sure you want to delete the book \"${document.getElementById(\"book-title\").value}\" entry?`)) {\n            const bookIndex = books.findIndex((book)=>book.id == bookId.value);\n            if (bookIndex !== -1) {\n                try {\n                    (0, $8XP4m.removeBookFromFirestore)(bookId.value);\n                } catch (error) {\n                    console.error(\"Error removing book from Firestore: \", error);\n                }\n                books.splice(bookIndex, 1);\n            }\n            $67fddd50f369a05c$var$displayBooks(books);\n            bookFormSection.classList.remove(\"show\");\n            bookList.classList.remove(\"hide\");\n        }\n    });\n    // Order by Title Button Listener\n    document.getElementById(\"order-by-title\").addEventListener(\"click\", ()=>{\n        // Toggle order\n        order = order === \"asc\" ? \"desc\" : \"asc\";\n        $67fddd50f369a05c$var$displayBooks((0, $1zsFO.orderBooksArrayBy)(books, \"title\", order));\n        (0, $hRA4F.closeMenu)();\n    });\n    // Order By Author Button Listener\n    document.getElementById(\"order-by-author\").addEventListener(\"click\", ()=>{\n        // Toggle order\n        order = order === \"asc\" ? \"desc\" : \"asc\";\n        $67fddd50f369a05c$var$displayBooks((0, $1zsFO.orderBooksArrayBy)(books, \"author\", order));\n        (0, $hRA4F.closeMenu)();\n    });\n    // Order By Progress Button Listener\n    document.getElementById(\"order-by-progress\").addEventListener(\"click\", ()=>{\n        // Toggle order\n        order = order === \"asc\" ? \"desc\" : \"asc\";\n        $67fddd50f369a05c$var$displayBooks((0, $1zsFO.orderBooksArrayBy)(books, \"progress\", order));\n        (0, $hRA4F.closeMenu)();\n    });\n    // Order By Rating Button Listener\n    document.getElementById(\"order-by-rating\").addEventListener(\"click\", ()=>{\n        // Toggle order\n        order = order === \"asc\" ? \"desc\" : \"asc\";\n        $67fddd50f369a05c$var$displayBooks((0, $1zsFO.orderBooksArrayBy)(books, \"rating\", order));\n        (0, $hRA4F.closeMenu)();\n    });\n    // First Display of Books on Page Load\n    $67fddd50f369a05c$var$displayBooks((0, $1zsFO.orderBooksArrayBy)(books, \"title\", order));\n});\n/**\n * Function to check if a user is authenticated\n * Redirects to index.html if user is not authenticated\n * @async\n */ function $67fddd50f369a05c$var$isUserAuthenticated() {\n    return new Promise((resolve, reject)=>{\n        (0, $8XP4m.auth).onAuthStateChanged((user)=>{\n            if (user) resolve(user);\n            else {\n                console.log(\"User is not authenticated\");\n                window.location = \"index.html\";\n                reject(\"User not authenticated\");\n            }\n        });\n    });\n}\n/**\n * Display Books\n * Renders each book as Articles inside Book-List Section.\n * @returns {void}\n */ function $67fddd50f369a05c$var$displayBooks(books) {\n    const bookList = document.getElementById(\"book-list\");\n    bookList.innerHTML = \"\";\n    books.forEach((book)=>{\n        // Book Article\n        const bookCard = document.createElement(\"article\");\n        bookCard.id = book.id;\n        bookCard.classList.add(\"book-card\");\n        bookCard.setAttribute(\"aria-labelledby\", `book-title-${book.id}`);\n        bookCard.tabIndex = 0;\n        // Book image container\n        if (book.cover !== \"\") {\n            const bookImgDiv = document.createElement(\"div\");\n            bookImgDiv.classList.add(\"book-img\");\n            const bookImg = document.createElement(\"img\");\n            bookImg.src = book.cover;\n            bookImg.alt = `${book.title} Book Cover`;\n            bookImgDiv.appendChild(bookImg);\n            bookCard.appendChild(bookImgDiv);\n        }\n        // Book info container\n        const bookInfoDiv = document.createElement(\"div\");\n        bookInfoDiv.classList.add(\"book-info\");\n        const bookTitle = document.createElement(\"h2\");\n        bookTitle.id = `book-title-${book.id}`;\n        bookTitle.textContent = book.title;\n        const bookAuthor = document.createElement(\"p\");\n        bookAuthor.innerHTML = `<strong>Author:</strong> ${book.author}`;\n        const bookGenre = document.createElement(\"p\");\n        bookGenre.innerHTML = `<strong>Genre:</strong> ${book.genre.join(\", \")}`;\n        const bookStatus = document.createElement(\"p\");\n        bookStatus.innerHTML = `<strong>Status:</strong> ${book.status}`;\n        const bookProgress = document.createElement(\"p\");\n        bookProgress.innerHTML = `<strong>Progress:</strong> ${book.progress}%`;\n        const bookRatingSpan = document.createElement(\"span\");\n        bookRatingSpan.classList.add(\"book-rating\");\n        bookRatingSpan.setAttribute(\"aria-label\", `Rating: ${book.rating} out of 5 stars`);\n        bookRatingSpan.innerHTML = $67fddd50f369a05c$var$renderStars(book.rating);\n        // Append all info elements\n        bookInfoDiv.appendChild(bookTitle);\n        bookInfoDiv.appendChild(bookAuthor);\n        bookInfoDiv.appendChild(bookGenre);\n        bookInfoDiv.appendChild(bookStatus);\n        bookInfoDiv.appendChild(bookProgress);\n        // Append info to article\n        bookCard.appendChild(bookInfoDiv);\n        bookCard.appendChild(bookRatingSpan);\n        // Append Article to Book List\n        bookList.appendChild(bookCard);\n    });\n}\n/**\n * Utility Function that creates a string of stars based on the rating value.\n * @param {number} rating - Rating value from 1 to 5\n * @returns {string} - String of stars\n */ function $67fddd50f369a05c$var$renderStars(rating) {\n    return \"&starf;\".repeat(rating) + \"&star;\".repeat(5 - rating);\n}\n/**\n * Utility Function to focus on a book card\n * Adds a highlight class to the card for 1 second.\n * @param {HTMLElement} card - Book card to focus on\n * @returns {void}\n */ function $67fddd50f369a05c$var$focusOnBookCard(card) {\n    if (card) {\n        card.classList.add(\"highlight\");\n        card.focus();\n        card.scrollIntoView({\n            behavior: \"smooth\"\n        });\n        setTimeout(()=>card.classList.remove(\"highlight\"), 1000);\n    }\n}\n\n\n//# sourceMappingURL=app.58e9697b.js.map\n","\"use strict\";\n\nvar mapping = new Map();\nfunction register(baseUrl, manifest) {\n  for (var i = 0; i < manifest.length - 1; i += 2) {\n    mapping.set(manifest[i], {\n      baseUrl: baseUrl,\n      path: manifest[i + 1]\n    });\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping.get(id);\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return new URL(resolved.path, resolved.baseUrl).toString();\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = new __parcel__URL__(\"service-worker.48cfd86f.js\").toString();","require('./helpers/bundle-manifest').register(new __parcel__URL__(\"\").toString(),JSON.parse(\"[\\\"aVCRy\\\",\\\"app.58e9697b.js\\\",\\\"3o9Aw\\\",\\\"service-worker.48cfd86f.js\\\"]\"));","import {\n  getBooksFromFirestore,\n  addBookToFirestore,\n  updateBookInFirestore,\n  removeBookFromFirestore,\n  auth,\n} from \"./firebase.js\";\nimport { openBookForm, orderBooksArrayBy, sanitizeInput } from \"./utility.js\";\nimport { closeMenu } from \"./menu.js\";\n\nconst sw = new URL(\"./service-worker.js\", import.meta.url);\nif (\"serviceWorker\" in navigator) {\n  const s = navigator.serviceWorker;\n  s.register(sw.href, {\n    scope: \"/codex/\",\n  })\n    .then(() =>\n      console.log(\n        \"Service Worker Registered for scope:\",\n        sw.href,\n        \"with\",\n        import.meta.url\n      )\n    )\n    .catch((err) => console.error(\"Service Worker Error:\", err));\n}\n\n// Load Listeners After DOM Content is Loaded\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  const books = [];\n  let order = \"asc\";\n\n  const bookList = document.getElementById(\"book-list\");\n  const bookFormSection = document.getElementById(\"book-form\");\n  const bookForm = document.getElementById(\"book-management-form\");\n  const closeBookForm = document.getElementById(\"close-form\");\n  const deleteBook = document.getElementById(\"delete-book\");\n  const bookId = document.getElementById(\"book-id\");\n\n  // Check if user is authenticated\n  await isUserAuthenticated();\n\n  // Load Books for the first time\n  await getBooksFromFirestore(books);\n\n  // Keyboard Navigation Functionality\n  let currentFocus = null;\n\n  // Keyboard navigation using arrow keys for book cards\n  bookList.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"ArrowDown\") {\n      event.preventDefault();\n      if (currentFocus === null) {\n        currentFocus = bookList.querySelector(\".book-card\");\n      } else {\n        const nextCard = currentFocus.nextElementSibling;\n        if (nextCard && nextCard.classList.contains(\"book-card\")) {\n          currentFocus = nextCard;\n        }\n      }\n      focusOnBookCard(currentFocus);\n    } else if (event.key === \"ArrowUp\") {\n      event.preventDefault();\n      if (currentFocus === null) {\n        currentFocus = bookList.querySelector(\".book-card\");\n      } else {\n        const prevCard = currentFocus.previousElementSibling;\n        if (prevCard && prevCard.classList.contains(\"book-card\")) {\n          currentFocus = prevCard;\n        }\n      }\n      focusOnBookCard(currentFocus);\n    } else if (event.key === \"Enter\" || event.key === \" \") {\n      // Trigger opening the form for the focused book card\n      event.preventDefault();\n      if (currentFocus) {\n        const bookId = currentFocus.id;\n        const book = books.find((b) => b.id == bookId);\n        openBookForm(book);\n      }\n    }\n  });\n\n  // Keyboard navigation using tab keys focus\n  bookList.addEventListener(\"focusin\", (event) => {\n    if (event.target && event.target.classList.contains(\"book-card\")) {\n      currentFocus = event.target;\n    }\n  });\n\n  // Book Form Listener\n  bookList.addEventListener(\"click\", (event) => {\n    const bookCard = event.target.closest(\".book-card\");\n    if (bookCard) {\n      const bookId = bookCard.id;\n      const book = books.find((b) => b.id == bookId);\n      openBookForm(book);\n    }\n  });\n\n  // Save Book Button Listener\n  bookForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const form = event.target;\n\n    if (!form.checkValidity()) {\n      form.reportValidity();\n      return;\n    }\n\n    const cover = sanitizeInput(\n      document.getElementById(\"book-cover\").value.trim()\n    );\n    const title = sanitizeInput(\n      document.getElementById(\"book-title\").value.trim()\n    );\n    const author = sanitizeInput(\n      document.getElementById(\"book-author\").value.trim()\n    );\n    const genre = document\n      .getElementById(\"book-genre\")\n      .value.split(\",\")\n      .map((item) => sanitizeInput(item.trim()));\n    const progress = sanitizeInput(\n      document.getElementById(\"book-progress\").value.trim()\n    );\n    const status = sanitizeInput(\n      document.getElementById(\"book-status\").value.trim()\n    );\n    const rating = sanitizeInput(\n      document.getElementById(\"book-rating\").value.trim()\n    );\n\n    let savedBook;\n\n    if (bookId.value !== \"\") {\n      const bookIndex = books.findIndex((book) => book.id == bookId.value);\n      if (bookIndex !== -1) {\n        books[bookIndex] = {\n          id: bookId.value,\n          cover: cover,\n          title: title,\n          author: author,\n          genre: genre,\n          progress: progress,\n          status: status,\n          rating: rating,\n        };\n\n        try {\n          await updateBookInFirestore(books[bookIndex]);\n        } catch (error) {\n          console.error(\"Error updating book in Firestore: \", error);\n        }\n\n        savedBook = books[bookIndex];\n      }\n    } else {\n      const newBook = {\n        cover: cover,\n        title: title,\n        author: author,\n        genre: genre,\n        progress: progress,\n        status: status,\n        rating: rating,\n      };\n      books.push(newBook);\n      try {\n        books[books.length - 1].id = await addBookToFirestore(newBook);\n      } catch (error) {\n        console.error(\"Error adding book to Firestore: \", error);\n      }\n      savedBook = newBook;\n    }\n\n    displayBooks(books);\n    bookFormSection.classList.remove(\"show\");\n    bookList.classList.remove(\"hide\");\n\n    const savedBookCard = document.getElementById(savedBook.id);\n\n    if (savedBookCard) {\n      savedBookCard.classList.add(\"highlight\");\n      savedBookCard.focus();\n      savedBookCard.scrollIntoView({ behavior: \"smooth\" });\n      setTimeout(() => savedBookCard.classList.remove(\"highlight\"), 1500);\n    }\n  });\n\n  // Close Form Button Listener\n  closeBookForm.addEventListener(\"click\", () => {\n    bookFormSection.classList.remove(\"show\");\n    bookList.classList.remove(\"hide\");\n  });\n\n  // Delete Book Button Listener\n  deleteBook.addEventListener(\"click\", function () {\n    if (bookId.value === \"\") return;\n    if (\n      confirm(\n        `Are you sure you want to delete the book \"${\n          document.getElementById(\"book-title\").value\n        }\" entry?`\n      )\n    ) {\n      const bookIndex = books.findIndex((book) => book.id == bookId.value);\n      if (bookIndex !== -1) {\n        try {\n          removeBookFromFirestore(bookId.value);\n        } catch (error) {\n          console.error(\"Error removing book from Firestore: \", error);\n        }\n        books.splice(bookIndex, 1);\n      }\n      displayBooks(books);\n      bookFormSection.classList.remove(\"show\");\n      bookList.classList.remove(\"hide\");\n    }\n  });\n\n  // Order by Title Button Listener\n  document.getElementById(\"order-by-title\").addEventListener(\"click\", () => {\n    // Toggle order\n    order = order === \"asc\" ? \"desc\" : \"asc\";\n    displayBooks(orderBooksArrayBy(books, \"title\", order));\n    closeMenu();\n  });\n\n  // Order By Author Button Listener\n  document.getElementById(\"order-by-author\").addEventListener(\"click\", () => {\n    // Toggle order\n    order = order === \"asc\" ? \"desc\" : \"asc\";\n    displayBooks(orderBooksArrayBy(books, \"author\", order));\n    closeMenu();\n  });\n\n  // Order By Progress Button Listener\n  document.getElementById(\"order-by-progress\").addEventListener(\"click\", () => {\n    // Toggle order\n    order = order === \"asc\" ? \"desc\" : \"asc\";\n    displayBooks(orderBooksArrayBy(books, \"progress\", order));\n    closeMenu();\n  });\n\n  // Order By Rating Button Listener\n  document.getElementById(\"order-by-rating\").addEventListener(\"click\", () => {\n    // Toggle order\n    order = order === \"asc\" ? \"desc\" : \"asc\";\n    displayBooks(orderBooksArrayBy(books, \"rating\", order));\n    closeMenu();\n  });\n\n  // First Display of Books on Page Load\n  displayBooks(orderBooksArrayBy(books, \"title\", order));\n});\n\n/**\n * Function to check if a user is authenticated\n * Redirects to index.html if user is not authenticated\n * @async\n */\nfunction isUserAuthenticated() {\n  return new Promise((resolve, reject) => {\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n        resolve(user);\n      } else {\n        console.log(\"User is not authenticated\");\n        window.location = \"index.html\";\n        reject(\"User not authenticated\");\n      }\n    });\n  });\n}\n\n/**\n * Display Books\n * Renders each book as Articles inside Book-List Section.\n * @returns {void}\n */\nfunction displayBooks(books) {\n  const bookList = document.getElementById(\"book-list\");\n  bookList.innerHTML = \"\";\n\n  books.forEach((book) => {\n    // Book Article\n    const bookCard = document.createElement(\"article\");\n    bookCard.id = book.id;\n    bookCard.classList.add(\"book-card\");\n    bookCard.setAttribute(\"aria-labelledby\", `book-title-${book.id}`);\n    bookCard.tabIndex = 0;\n\n    // Book image container\n    if (book.cover !== \"\") {\n      const bookImgDiv = document.createElement(\"div\");\n      bookImgDiv.classList.add(\"book-img\");\n      const bookImg = document.createElement(\"img\");\n      bookImg.src = book.cover;\n      bookImg.alt = `${book.title} Book Cover`;\n      bookImgDiv.appendChild(bookImg);\n      bookCard.appendChild(bookImgDiv);\n    }\n\n    // Book info container\n    const bookInfoDiv = document.createElement(\"div\");\n    bookInfoDiv.classList.add(\"book-info\");\n    const bookTitle = document.createElement(\"h2\");\n    bookTitle.id = `book-title-${book.id}`;\n    bookTitle.textContent = book.title;\n    const bookAuthor = document.createElement(\"p\");\n    bookAuthor.innerHTML = `<strong>Author:</strong> ${book.author}`;\n    const bookGenre = document.createElement(\"p\");\n    bookGenre.innerHTML = `<strong>Genre:</strong> ${book.genre.join(\", \")}`;\n    const bookStatus = document.createElement(\"p\");\n    bookStatus.innerHTML = `<strong>Status:</strong> ${book.status}`;\n    const bookProgress = document.createElement(\"p\");\n    bookProgress.innerHTML = `<strong>Progress:</strong> ${book.progress}%`;\n    const bookRatingSpan = document.createElement(\"span\");\n    bookRatingSpan.classList.add(\"book-rating\");\n    bookRatingSpan.setAttribute(\n      \"aria-label\",\n      `Rating: ${book.rating} out of 5 stars`\n    );\n    bookRatingSpan.innerHTML = renderStars(book.rating);\n\n    // Append all info elements\n    bookInfoDiv.appendChild(bookTitle);\n    bookInfoDiv.appendChild(bookAuthor);\n    bookInfoDiv.appendChild(bookGenre);\n    bookInfoDiv.appendChild(bookStatus);\n    bookInfoDiv.appendChild(bookProgress);\n    // Append info to article\n    bookCard.appendChild(bookInfoDiv);\n    bookCard.appendChild(bookRatingSpan);\n\n    // Append Article to Book List\n    bookList.appendChild(bookCard);\n  });\n}\n\n/**\n * Utility Function that creates a string of stars based on the rating value.\n * @param {number} rating - Rating value from 1 to 5\n * @returns {string} - String of stars\n */\nfunction renderStars(rating) {\n  return \"&starf;\".repeat(rating) + \"&star;\".repeat(5 - rating);\n}\n\n/**\n * Utility Function to focus on a book card\n * Adds a highlight class to the card for 1 second.\n * @param {HTMLElement} card - Book card to focus on\n * @returns {void}\n */\nfunction focusOnBookCard(card) {\n  if (card) {\n    card.classList.add(\"highlight\");\n    card.focus();\n    card.scrollIntoView({ behavior: \"smooth\" });\n    setTimeout(() => card.classList.remove(\"highlight\"), 1000);\n  }\n}\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","Object","defineProperty","get","$18c11f3350a906ea$export$6503ec6e8aabbaf","set","v","enumerable","configurable","$18c11f3350a906ea$var$mapping","Map","baseUrl","manifest","i","length","path","URL","url","toString","JSON","parse","$8XP4m","$1zsFO","$hRA4F","$67fddd50f369a05c$var$sw","$67fddd50f369a05c$var$displayBooks","books","bookList","document","getElementById","innerHTML","forEach","book","rating","bookCard","createElement","classList","add","setAttribute","tabIndex","cover","bookImgDiv","bookImg","src","alt","title","appendChild","bookInfoDiv","bookTitle","textContent","bookAuthor","author","bookGenre","genre","join","bookStatus","status","bookProgress","progress","bookRatingSpan","repeat","$67fddd50f369a05c$var$focusOnBookCard","card","focus","scrollIntoView","behavior","setTimeout","remove","navigator","s","serviceWorker","href","scope","then","console","log","catch","error","addEventListener","order","bookFormSection","bookForm","closeBookForm","deleteBook","bookId","Promise","resolve","reject","auth","onAuthStateChanged","user","window","location","getBooksFromFirestore","currentFocus","event","key","preventDefault","querySelector","nextCard","nextElementSibling","contains","prevCard","previousElementSibling","find","b","openBookForm","target","closest","savedBook","form","checkValidity","reportValidity","sanitizeInput","value","trim","split","map","item","bookIndex","findIndex","updateBookInFirestore","newBook","push","addBookToFirestore","savedBookCard","confirm","removeBookFromFirestore","splice","orderBooksArrayBy","closeMenu"],"version":3,"file":"app.58e9697b.js.map"}