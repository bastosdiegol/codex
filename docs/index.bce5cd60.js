var e=globalThis,t={},o={},r=e.parcelRequire94c2;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in o){var r=o[e];delete o[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){o[e]=t},e.parcelRequire94c2=r),(0,r.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>o,set:e=>o=e,enumerable:!0,configurable:!0});var o,r=new Map;o=function(e,t){for(var o=0;o<t.length-1;o+=2)r.set(t[o],{baseUrl:e,path:t[o+1]})}}),r("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["aVCRy","index.bce5cd60.js","3o9Aw","service-worker.ce7b94b9.js"]'));var n=r("8XP4m"),l={};l=new URL("service-worker.ce7b94b9.js",import.meta.url).toString();const i=new URL(l);function a(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}"serviceWorker"in navigator&&navigator.serviceWorker.register(i.href,{scope:"/codex/"}).then(()=>console.log("Service Worker Registered for scope:",i.href,"with","file:///assets/scripts/app.js")).catch(e=>console.error("Service Worker Error:",e)),document.addEventListener("DOMContentLoaded",async()=>{let e=[],t=document.getElementById("book-list"),o=document.getElementById("book-form"),r=document.getElementById("side-menu"),l=document.getElementById("menu-overlay"),i=document.getElementById("burger-menu"),s=document.getElementById("close-menu"),d=document.getElementById("add-book-link"),c=document.getElementById("save-book"),u=document.getElementById("close-form"),m=document.getElementById("delete-book"),g=document.getElementById("book-id");function v(){r.classList.remove("open"),l.classList.remove("show"),f(!1)}f(!1),i.addEventListener("click",function(){r.classList.add("open"),l.classList.add("show"),f(!0),function(){let e=r.querySelectorAll("a"),t=r.querySelector("#close-menu"),o=e[0],n=e[e.length-1];r.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===o?(t.focus(),e.preventDefault()):document.activeElement===t&&(n.focus(),e.preventDefault()):document.activeElement===n?(t.focus(),e.preventDefault()):document.activeElement===t&&(o.focus(),e.preventDefault()))})}()}),s.addEventListener("click",v),l.addEventListener("click",v);try{await (0,n.getBooksFromFirestore)(e)}catch(e){console.error("Error getting books from Firestore: ",e)}function p(){t.innerHTML="",e.forEach(e=>{var o;let r=document.createElement("article");if(r.id=e.id,r.classList.add("book-card"),r.setAttribute("aria-labelledby",`book-title-${e.id}`),r.tabIndex=0,""!==e.cover){let t=document.createElement("div");t.classList.add("book-img");let o=document.createElement("img");o.src=e.cover,o.alt=`${e.title} Book Cover`,t.appendChild(o),r.appendChild(t)}let n=document.createElement("div");n.classList.add("book-info");let l=document.createElement("h2");l.id=`book-title-${e.id}`,l.textContent=e.title;let i=document.createElement("p");i.innerHTML=`<strong>Author:</strong> ${e.author}`;let a=document.createElement("p");a.innerHTML=`<strong>Genre:</strong> ${e.genre.join(", ")}`;let s=document.createElement("p");s.innerHTML=`<strong>Status:</strong> ${e.status}`;let d=document.createElement("p");d.innerHTML=`<strong>Progress:</strong> ${e.progress}%`;let c=document.createElement("span");c.classList.add("book-rating"),c.setAttribute("aria-label",`Rating: ${e.rating} out of 5 stars`),c.innerHTML=(o=e.rating,"&starf;".repeat(o)+"&star;".repeat(5-o)),n.appendChild(l),n.appendChild(i),n.appendChild(a),n.appendChild(s),n.appendChild(d),r.appendChild(n),r.appendChild(c),t.appendChild(r)})}let k=null;function E(e){e&&(e.classList.add("highlight"),e.focus(),e.scrollIntoView({behavior:"smooth"}),setTimeout(()=>e.classList.remove("highlight"),1e3))}function b(e=null){let r=document.getElementById("book-cover"),n=document.getElementById("book-id"),l=document.getElementById("book-title"),i=document.getElementById("book-author"),a=document.getElementById("book-genre"),s=document.getElementById("book-progress"),d=document.getElementById("book-status"),c=document.getElementById("book-rating");e?(r.value=e.cover,n.value=e.id,l.value=e.title,i.value=e.author,a.value=e.genre,s.value=e.progress,d.value=e.status,c.value=e.rating,m.style.display="inline-block"):(r.value="",n.value="",l.value="",i.value="",a.value="",s.value="",d.value="Not Read",c.value="",m.style.display="none"),o.classList.add("show"),t.classList.add("hide")}function f(e){let t=r.querySelectorAll("nav a"),o=r.querySelector("#close-menu");t.forEach(t=>{e?t.setAttribute("tabindex","0"):t.setAttribute("tabindex","-1")}),e?o.setAttribute("tabindex","0"):o.setAttribute("tabindex","-1")}t.addEventListener("keydown",o=>{if("ArrowDown"===o.key){if(o.preventDefault(),null===k)k=t.querySelector(".book-card");else{let e=k.nextElementSibling;e&&e.classList.contains("book-card")&&(k=e)}E(k)}else if("ArrowUp"===o.key){if(o.preventDefault(),null===k)k=t.querySelector(".book-card");else{let e=k.previousElementSibling;e&&e.classList.contains("book-card")&&(k=e)}E(k)}else if(("Enter"===o.key||" "===o.key)&&(o.preventDefault(),k)){let t=k.id;b(e.find(e=>e.id==t))}}),t.addEventListener("focusin",e=>{e.target&&e.target.classList.contains("book-card")&&(k=e.target)}),t.addEventListener("click",t=>{let o=t.target.closest(".book-card");if(o){let t=o.id;b(e.find(e=>e.id==t))}}),c.addEventListener("click",async()=>{let r;let l=document.getElementById("book-management-form");if(!l.checkValidity()){l.reportValidity();return}let i=a(document.getElementById("book-cover").value.trim()),s=a(document.getElementById("book-title").value.trim()),d=a(document.getElementById("book-author").value.trim()),c=document.getElementById("book-genre").value.split(",").map(e=>a(e.trim())),u=a(document.getElementById("book-progress").value.trim()),m=a(document.getElementById("book-status").value.trim()),v=a(document.getElementById("book-rating").value.trim());if(""!==g.value){let t=e.findIndex(e=>e.id==g.value);if(-1!==t){e[t]={id:g.value,cover:i,title:s,author:d,genre:c,progress:u,status:m,rating:v};try{await (0,n.updateBookInFirestore)(e[t])}catch(e){console.error("Error updating book in Firestore: ",e)}r=e[t]}}else{let t={cover:i,title:s,author:d,genre:c,progress:u,status:m,rating:v};e.push(t);try{e[e.length-1].id=await (0,n.addBookToFirestore)(t)}catch(e){console.error("Error adding book to Firestore: ",e)}r=t}p(),o.classList.remove("show"),t.classList.remove("hide");let k=document.getElementById(r.id);k&&(k.classList.add("highlight"),k.focus(),k.scrollIntoView({behavior:"smooth"}),setTimeout(()=>k.classList.remove("highlight"),1500))}),u.addEventListener("click",()=>{o.classList.remove("show"),t.classList.remove("hide")}),m.addEventListener("click",function(){if(""!==g.value&&confirm(`Are you sure you want to delete the book "${document.getElementById("book-title").value}" entry?`)){let r=e.findIndex(e=>e.id==g.value);if(-1!==r){try{(0,n.removeBookFromFirestore)(g.value)}catch(e){console.error("Error removing book from Firestore: ",e)}e.splice(r,1)}p(),o.classList.remove("show"),t.classList.remove("hide")}}),d.addEventListener("click",e=>{e.preventDefault(),b(),v()}),p()});
//# sourceMappingURL=index.bce5cd60.js.map
